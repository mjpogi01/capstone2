{"version":3,"file":"static/js/286.b7a524c4.chunk.js","mappings":"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","sources":["../node_modules/react-leaflet/lib/CircleMarker.js","../node_modules/@react-leaflet/core/lib/circle.js","../node_modules/react-leaflet/lib/Tooltip.js","components/admin/BranchMap.js","../node_modules/leaflet.heat/dist/leaflet-heat.js"],"sourcesContent":["import { createElementObject, createPathComponent, extendContext, updateCircle } from '@react-leaflet/core';\nimport { CircleMarker as LeafletCircleMarker } from 'leaflet';\nexport const CircleMarker = createPathComponent(function createCircleMarker({ center, children: _c, ...options }, ctx) {\n    const marker = new LeafletCircleMarker(center, options);\n    return createElementObject(marker, extendContext(ctx, {\n        overlayContainer: marker\n    }));\n}, updateCircle);\n","export function updateCircle(layer, props, prevProps) {\n    if (props.center !== prevProps.center) {\n        layer.setLatLng(props.center);\n    }\n    if (props.radius != null && props.radius !== prevProps.radius) {\n        layer.setRadius(props.radius);\n    }\n}\n","import { createElementObject, createOverlayComponent } from '@react-leaflet/core';\nimport { Tooltip as LeafletTooltip } from 'leaflet';\nimport { useEffect } from 'react';\nexport const Tooltip = createOverlayComponent(function createTooltip(props, context) {\n    const tooltip = new LeafletTooltip(props, context.overlayContainer);\n    return createElementObject(tooltip, context);\n}, function useTooltipLifecycle(element, context, { position }, setOpen) {\n    useEffect(function addTooltip() {\n        const container = context.overlayContainer;\n        if (container == null) {\n            return;\n        }\n        const { instance } = element;\n        const onTooltipOpen = (event)=>{\n            if (event.tooltip === instance) {\n                if (position != null) {\n                    instance.setLatLng(position);\n                }\n                instance.update();\n                setOpen(true);\n            }\n        };\n        const onTooltipClose = (event)=>{\n            if (event.tooltip === instance) {\n                setOpen(false);\n            }\n        };\n        container.on({\n            tooltipopen: onTooltipOpen,\n            tooltipclose: onTooltipClose\n        });\n        container.bindTooltip(instance);\n        return function removeTooltip() {\n            container.off({\n                tooltipopen: onTooltipOpen,\n                tooltipclose: onTooltipClose\n            });\n            // @ts-ignore protected property\n            if (container._map != null) {\n                container.unbindTooltip();\n            }\n        };\n    }, [\n        element,\n        context,\n        setOpen,\n        position\n    ]);\n});\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { MapContainer, TileLayer, CircleMarker, useMap, Tooltip } from 'react-leaflet';\r\nimport { FaMap, FaUsers } from 'react-icons/fa';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './BranchMap.css';\r\nimport { API_URL } from '../../config/api';\r\nimport { authFetch } from '../../services/apiClient';\r\nimport 'leaflet.heat';\r\n\r\n// Ensure heat layer canvas uses willReadFrequently context for better performance with frequent readbacks\r\nif (L.HeatLayer && typeof L.HeatLayer.prototype._initCanvas === 'function') {\r\n  const originalInitCanvas = L.HeatLayer.prototype._initCanvas;\r\n  L.HeatLayer.prototype._initCanvas = function patchedInitCanvas() {\r\n    originalInitCanvas.call(this);\r\n    if (this._canvas && this._canvas.getContext) {\r\n      const ctx = this._canvas.getContext('2d', { willReadFrequently: true }) || this._canvas.getContext('2d');\r\n      if (ctx) {\r\n        this._ctx = ctx;\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\n// Patch _clear method to handle undefined canvas context gracefully\r\nif (L.HeatLayer && typeof L.HeatLayer.prototype._clear === 'function') {\r\n  const originalClear = L.HeatLayer.prototype._clear;\r\n  L.HeatLayer.prototype._clear = function patchedClear() {\r\n    // Ensure canvas exists\r\n    if (!this._canvas) {\r\n      return;\r\n    }\r\n    \r\n    // Ensure context exists - try to get it if missing\r\n    if (!this._ctx) {\r\n      try {\r\n        const ctx = this._canvas.getContext('2d', { willReadFrequently: true }) || this._canvas.getContext('2d');\r\n        if (ctx) {\r\n          this._ctx = ctx;\r\n        } else {\r\n          return; // Can't clear if no context available\r\n        }\r\n      } catch (e) {\r\n        return; // Canvas might not be ready yet\r\n      }\r\n    }\r\n    \r\n    // Double-check context still exists before calling original\r\n    if (!this._ctx || typeof this._ctx.clearRect !== 'function') {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      originalClear.call(this);\r\n    } catch (error) {\r\n      // Silently fail - this is often a timing issue that resolves itself\r\n      // Don't log to avoid console spam\r\n    }\r\n  };\r\n}\r\n\r\n// Patch _redraw method to ensure canvas is initialized\r\nif (L.HeatLayer && typeof L.HeatLayer.prototype._redraw === 'function') {\r\n  const originalRedraw = L.HeatLayer.prototype._redraw;\r\n  L.HeatLayer.prototype._redraw = function patchedRedraw() {\r\n    // Ensure canvas exists\r\n    if (!this._canvas) {\r\n      return;\r\n    }\r\n    \r\n    // Ensure context exists - try to initialize if missing\r\n    if (!this._ctx) {\r\n      if (this._initCanvas) {\r\n        try {\r\n          this._initCanvas();\r\n        } catch (e) {\r\n          // Canvas might not be ready\r\n        }\r\n      }\r\n      \r\n      // Try to get context directly if still missing\r\n      if (!this._ctx) {\r\n        try {\r\n          const ctx = this._canvas.getContext('2d', { willReadFrequently: true }) || this._canvas.getContext('2d');\r\n          if (ctx) {\r\n            this._ctx = ctx;\r\n          } else {\r\n            return; // Can't redraw without context\r\n          }\r\n        } catch (e) {\r\n          return; // Canvas not ready\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Double-check context has required methods\r\n    if (!this._ctx || typeof this._ctx.clearRect !== 'function') {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      originalRedraw.call(this);\r\n    } catch (error) {\r\n      // Silently fail - this is often a timing issue that resolves itself\r\n      // Don't log to avoid console spam\r\n    }\r\n  };\r\n}\r\n\r\n// Fix for default marker icons in React\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\r\n});\r\n\r\n// Component to fit map bounds (only on initial load)\r\nfunction FitBounds({ points, shouldFit }) {\r\n  const map = useMap();\r\n  const hasFittedRef = React.useRef(false);\r\n  \r\n  useEffect(() => {\r\n    // Only fit bounds on initial load when shouldFit is true\r\n    if (shouldFit && !hasFittedRef.current && points && points.length > 0) {\r\n      const bounds = points.map(point => [point[0], point[1]]);\r\n      const boundsGroup = L.latLngBounds(bounds);\r\n      map.fitBounds(boundsGroup, { padding: [50, 50] });\r\n      hasFittedRef.current = true;\r\n    }\r\n  }, [map, points, shouldFit]);\r\n  \r\n  return null;\r\n}\r\n\r\nfunction HeatmapLayer({ points, visible }) {\r\n  const map = useMap();\r\n  const heatLayerRef = React.useRef(null);\r\n  const mapReadyRef = React.useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!map) {\r\n      return undefined;\r\n    }\r\n\r\n    // Wait for map to be fully initialized\r\n    const checkMapReady = () => {\r\n      if (map && map.getContainer() && map._loaded) {\r\n        mapReadyRef.current = true;\r\n      } else {\r\n        mapReadyRef.current = false;\r\n      }\r\n    };\r\n\r\n    // Check immediately\r\n    checkMapReady();\r\n\r\n    // Also listen for map load event\r\n    const onMapReady = () => {\r\n      mapReadyRef.current = true;\r\n    };\r\n    \r\n    map.on('load', onMapReady);\r\n    if (map._loaded) {\r\n      mapReadyRef.current = true;\r\n    }\r\n\r\n    const removeLayer = () => {\r\n      const layer = heatLayerRef.current;\r\n      if (!layer) {\r\n        return;\r\n      }\r\n      \r\n      // Clear the heatmap data first\r\n      try {\r\n        if (layer.setLatLngs) {\r\n          layer.setLatLngs([]);\r\n        }\r\n      } catch (e) {\r\n        // Ignore errors when clearing\r\n      }\r\n      \r\n      // Remove from map\r\n      if (map.hasLayer(layer)) {\r\n        try {\r\n        map.removeLayer(layer);\r\n        } catch (e) {\r\n          // Ignore errors when removing\r\n        }\r\n      }\r\n      \r\n      // Hide canvas element if it exists\r\n      try {\r\n        if (layer._canvas && layer._canvas.parentNode) {\r\n          layer._canvas.style.display = 'none';\r\n        }\r\n      } catch (e) {\r\n        // Ignore errors\r\n      }\r\n      \r\n      // Clear the canvas if it exists\r\n      try {\r\n        if (layer._canvas && layer._ctx && typeof layer._ctx.clearRect === 'function') {\r\n          const ctx = layer._ctx;\r\n          ctx.clearRect(0, 0, layer._canvas.width, layer._canvas.height);\r\n        }\r\n      } catch (e) {\r\n        // Ignore errors\r\n      }\r\n      \r\n      heatLayerRef.current = null;\r\n    };\r\n\r\n    const ensureLayer = () => {\r\n      if (!heatLayerRef.current) {\r\n        try {\r\n          const layer = L.heatLayer([], {\r\n            radius: 20,\r\n            blur: 28,\r\n            maxZoom: 11,\r\n            minOpacity: 0.35,\r\n            gradient: {\r\n              0.0: '#fee2e2',\r\n              0.45: '#fca5a5',\r\n              0.65: '#f87171',\r\n              0.85: '#ef4444',\r\n              1.0: '#b91c1c'\r\n            }\r\n          });\r\n          heatLayerRef.current = layer;\r\n        } catch (layerError) {\r\n          console.warn('Error creating heat layer:', layerError);\r\n          return null;\r\n        }\r\n      }\r\n      return heatLayerRef.current;\r\n    };\r\n\r\n    const updateLayer = () => {\r\n      if (!visible) {\r\n        removeLayer();\r\n        return;\r\n      }\r\n      \r\n      // Wait for map to be ready\r\n      if (!mapReadyRef.current) {\r\n        // Retry after a short delay if map isn't ready\r\n        setTimeout(updateLayer, 100);\r\n        return;\r\n      }\r\n      \r\n      const layer = ensureLayer();\r\n      if (!layer) {\r\n        return;\r\n      }\r\n      \r\n      // Ensure map is ready before adding layer\r\n      if (!map || !map.getContainer()) {\r\n        return;\r\n      }\r\n      \r\n      // Ensure map is fully loaded\r\n      if (!map._loaded && !map._container) {\r\n        // Map not loaded yet, retry later\r\n        setTimeout(updateLayer, 100);\r\n        return;\r\n      }\r\n      \r\n      const latLngs = Array.isArray(points) && points.length > 0 ? points : [];\r\n      \r\n      // Use requestAnimationFrame to ensure canvas is ready\r\n      requestAnimationFrame(() => {\r\n        try {\r\n          // Ensure map container exists and is ready\r\n          const mapContainer = map?.getContainer();\r\n          if (!mapContainer || !mapContainer.parentNode) {\r\n            // Map container not ready, retry later\r\n            setTimeout(updateLayer, 100);\r\n            return;\r\n          }\r\n          \r\n          // Double-check canvas context exists before updating\r\n          if (layer._canvas && (!layer._ctx || !layer._canvas.getContext)) {\r\n            // Reinitialize canvas if needed\r\n            if (layer._initCanvas) {\r\n              layer._initCanvas();\r\n            }\r\n          }\r\n          \r\n          // Make sure canvas is visible when showing\r\n          if (layer._canvas) {\r\n            layer._canvas.style.display = '';\r\n          }\r\n          \r\n          // Only update lat/lngs if layer is already on map, otherwise wait\r\n          if (map.hasLayer(layer)) {\r\n            layer.setLatLngs(latLngs);\r\n          } else {\r\n            // Layer not on map yet - ensure map is fully ready before adding\r\n            if (map._panes && map._panes.overlayPane && map._panes.overlayPane.parentNode) {\r\n              // Double-check that the overlay pane is in the DOM\r\n              try {\r\n                // Verify the pane has a parent (is in DOM) and the map container is visible\r\n                const paneParent = map._panes.overlayPane.parentNode;\r\n                const mapContainer = map.getContainer();\r\n                \r\n                if (paneParent && paneParent.appendChild && mapContainer && mapContainer.offsetParent !== null) {\r\n                  // Map is visible and ready - try to add layer\r\n                  try {\r\n                    layer.setLatLngs(latLngs);\r\n                    layer.addTo(map);\r\n                  } catch (addError) {\r\n                    // If addTo fails, retry after delay\r\n                    if (addError.message && addError.message.includes('appendChild')) {\r\n                      setTimeout(updateLayer, 200);\r\n                    } else {\r\n                      throw addError;\r\n                    }\r\n                  }\r\n                } else {\r\n                  // Map not visible or pane not attached, retry\r\n                  setTimeout(updateLayer, 100);\r\n                }\r\n              } catch (paneError) {\r\n                // Pane check failed, retry\r\n                setTimeout(updateLayer, 100);\r\n              }\r\n            } else {\r\n              // Map panes not ready, retry later\r\n              setTimeout(updateLayer, 100);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          // Silently handle errors - often timing issues that resolve themselves\r\n          // Only retry if it's a critical error\r\n          if (error.message && error.message.includes('appendChild')) {\r\n            // Retry after a short delay\r\n            setTimeout(updateLayer, 200);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    // Delay initial update to ensure map is ready\r\n    const timeoutId = setTimeout(() => {\r\n      updateLayer();\r\n    }, 100);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      removeLayer();\r\n      if (map) {\r\n        map.off('load', onMapReady);\r\n      }\r\n    };\r\n  }, [map, points, visible]);\r\n\r\n  return null;\r\n}\r\n\r\nconst BranchMap = ({ onDataLoaded }) => {\r\n  const [heatmapData, setHeatmapData] = useState([]);\r\n  const [markerData, setMarkerData] = useState([]);\r\n  const [cityStats, setCityStats] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showHeatmap, setShowHeatmap] = useState(true);\r\n  const [showMarkers, setShowMarkers] = useState(true);\r\n  const [hasInitialFit, setHasInitialFit] = useState(false);\r\n\r\n  const reportData = useCallback((points = [], stats = [], extra = {}) => {\r\n    if (typeof onDataLoaded === 'function') {\r\n      const totalCustomers = Array.isArray(stats)\r\n        ? stats.reduce((sum, item) => sum + (Number(item.count) || 0), 0)\r\n        : 0;\r\n      onDataLoaded({\r\n        points,\r\n        cityStats: stats,\r\n        summary: {\r\n          totalPoints: Array.isArray(points) ? points.length : 0,\r\n          totalCities: Array.isArray(stats) ? stats.length : 0,\r\n          totalCustomers,\r\n          topCity: Array.isArray(stats) && stats.length ? stats[0].city : null,\r\n          ...extra\r\n        }\r\n      });\r\n    }\r\n  }, [onDataLoaded]);\r\n\r\n  useEffect(() => {\r\n    fetchCustomerLocations();\r\n    \r\n    // Auto-refresh disabled - customer locations will only load once when component mounts\r\n    // If you want to re-enable auto-refresh, uncomment the code below:\r\n    // const refreshInterval = setInterval(() => {\r\n    //   fetchCustomerLocations();\r\n    // }, 30000); // 30 seconds\r\n    // \r\n    // return () => {\r\n    //   clearInterval(refreshInterval);\r\n    // };\r\n  }, []);\r\n\r\n  const fetchCustomerLocations = async () => {\r\n    try {\r\n      setLoading(true);\r\n      reportData([], [], { status: 'loading' });\r\n      const response = await authFetch(`${API_URL}/api/analytics/customer-locations`);\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success && data.data) {\r\n          const points = Array.isArray(data.data) ? data.data : [];\r\n          const markers = Array.isArray(data.markers) ? data.markers : [];\r\n          const statsRaw = Array.isArray(data.cityStats) ? data.cityStats : [];\r\n          const stats = [...statsRaw].sort((a, b) => (Number(b.count) || 0) - (Number(a.count) || 0));\r\n          setHeatmapData(points);\r\n          setCityStats(stats);\r\n          setMarkerData(markers); // Store marker data with customer names\r\n          reportData(points, stats, { status: 'loaded', source: 'api' });\r\n          console.log(`✅ Loaded ${points.length} customer location points from database`);\r\n          \r\n          // Mark initial fit after first successful load\r\n          if (!hasInitialFit && points.length > 0) {\r\n            setHasInitialFit(true);\r\n          }\r\n        } else {\r\n          // No data available - show empty state\r\n          setHeatmapData([]);\r\n          setCityStats([]);\r\n          reportData([], [], { status: 'loaded', source: 'api', empty: true });\r\n          console.log('ℹ️ No customer location data available');\r\n        }\r\n      } else {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        console.error('❌ API error fetching customer locations:', errorData);\r\n        setHeatmapData([]);\r\n        setCityStats([]);\r\n        reportData([], [], { status: 'error', source: 'api', error: errorData.error || 'Failed to fetch customer locations' });\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Error fetching customer locations:', error);\r\n      setHeatmapData([]);\r\n      setCityStats([]);\r\n      reportData([], [], { status: 'error', source: 'api', error: error.message || 'Network error' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const heatmapPoints = useMemo(() => {\r\n    if (!heatmapData || heatmapData.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return heatmapData.map(point => [\r\n      point[0],\r\n      point[1],\r\n      typeof point[2] === 'number' ? point[2] : 1\r\n    ]);\r\n  }, [heatmapData]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"branch-map-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading map...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show empty state if no data\r\n  if (!loading && heatmapData.length === 0 && cityStats.length === 0) {\r\n    return (\r\n      <div className=\"branch-map-container\">\r\n        <div className=\"branch-map-header\">\r\n          <div>\r\n            <h3>\r\n              <FaUsers className=\"header-icon\" />\r\n              Customer Locations\r\n            </h3>\r\n            <p>No customer location data available</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"branch-map-empty-state\">\r\n          <FaMap className=\"empty-icon\" />\r\n          <p>No customer locations found in the database.</p>\r\n          <p className=\"empty-subtitle\">Customer locations will appear here once customers add addresses or place orders.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Calculate map center (centered on Batangas region)\r\n  const mapCenter = [13.7563, 121.0583]; // Batangas City coordinates\r\n  const mapZoom = 9;\r\n\r\n  return (\r\n    <div className=\"branch-map-container\">\r\n      <div className=\"branch-map-header\">\r\n        <div>\r\n          <h3>\r\n            <FaUsers className=\"header-icon\" />\r\n            Customer Locations\r\n          </h3>\r\n          <p>Visualize customer density with heatmap and red dot markers</p>\r\n        </div>\r\n        <div className=\"branch-map-controls\">\r\n          <label className=\"map-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={showHeatmap}\r\n              onChange={() => setShowHeatmap(prev => !prev)}\r\n            />\r\n            <span className=\"toggle-slider\"></span>\r\n            <span className=\"toggle-label\">\r\n              <span className=\"toggle-text\">Heatmap</span>\r\n            </span>\r\n          </label>\r\n          <label className=\"map-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={showMarkers}\r\n              onChange={() => setShowMarkers(prev => !prev)}\r\n            />\r\n            <span className=\"toggle-slider\"></span>\r\n            <span className=\"toggle-label\">\r\n              <span className=\"toggle-text\">Red Dots</span>\r\n            </span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"branch-map-wrapper\">\r\n        <MapContainer\r\n          center={mapCenter}\r\n          zoom={mapZoom}\r\n          style={{ height: '600px', width: '100%', borderRadius: '12px' }}\r\n          scrollWheelZoom={true}\r\n          preferCanvas={true}\r\n        >\r\n          <TileLayer\r\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n          \r\n          <FitBounds points={heatmapData} shouldFit={!hasInitialFit && heatmapData.length > 0} />\r\n          <HeatmapLayer points={heatmapPoints} visible={showHeatmap} />\r\n          \r\n          {/* Render red dots for each customer location */}\r\n          {showMarkers &&\r\n            heatmapData.map((point, index) => {\r\n              // Get customer name from marker data if available\r\n              const marker = markerData[index] || markerData.find(m => \r\n                m && typeof m === 'object' && \r\n                Math.abs(m.lat - point[0]) < 0.0001 && \r\n                Math.abs(m.lng - point[1]) < 0.0001\r\n              );\r\n              const customerName = marker && typeof marker === 'object' ? marker.customerName : null;\r\n              \r\n              return (\r\n              <CircleMarker\r\n                key={index}\r\n                center={[point[0], point[1]]}\r\n                radius={4}\r\n                pathOptions={{\r\n                  fillColor: '#ef4444',\r\n                  color: '#dc2626',\r\n                  fillOpacity: 0.8,\r\n                  weight: 1\r\n                }}\r\n                >\r\n                  {customerName && (\r\n                    <Tooltip permanent={false} direction=\"top\" offset={[0, -10]}>\r\n                      {customerName}\r\n                    </Tooltip>\r\n                  )}\r\n                </CircleMarker>\r\n              );\r\n            })}\r\n          \r\n        </MapContainer>\r\n      </div>\r\n      \r\n      {/* Customer Statistics */}\r\n      <div className=\"branch-map-legend\">\r\n        <h4>Top Customer Cities</h4>\r\n        <div className=\"legend-items\">\r\n          {cityStats.slice(0, 10).map((stat, index) => (\r\n            <div key={index} className=\"legend-item\">\r\n              <div className=\"legend-marker\" style={{\r\n                backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6'][index % 5]\r\n              }}></div>\r\n              <span className=\"legend-city\">{stat.city}</span>\r\n              <span className=\"legend-count\">({stat.count} customers)</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BranchMap;\r\n","/*\n (c) 2014, Vladimir Agafonkin\n simpleheat, a tiny JavaScript library for drawing heatmaps with Canvas\n https://github.com/mourner/simpleheat\n*/\n!function(){\"use strict\";function t(i){return this instanceof t?(this._canvas=i=\"string\"==typeof i?document.getElementById(i):i,this._ctx=i.getContext(\"2d\"),this._width=i.width,this._height=i.height,this._max=1,void this.clear()):new t(i)}t.prototype={defaultRadius:25,defaultGradient:{.4:\"blue\",.6:\"cyan\",.7:\"lime\",.8:\"yellow\",1:\"red\"},data:function(t,i){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,i){i=i||15;var a=this._circle=document.createElement(\"canvas\"),s=a.getContext(\"2d\"),e=this._r=t+i;return a.width=a.height=2*e,s.shadowOffsetX=s.shadowOffsetY=200,s.shadowBlur=i,s.shadowColor=\"black\",s.beginPath(),s.arc(e-200,e-200,t,0,2*Math.PI,!0),s.closePath(),s.fill(),this},gradient:function(t){var i=document.createElement(\"canvas\"),a=i.getContext(\"2d\"),s=a.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var e in t)s.addColorStop(e,t[e]);return a.fillStyle=s,a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var i=this._ctx;i.clearRect(0,0,this._width,this._height);for(var a,s=0,e=this._data.length;e>s;s++)a=this._data[s],i.globalAlpha=Math.max(a[2]/this._max,t||.05),i.drawImage(this._circle,a[0]-this._r,a[1]-this._r);var n=i.getImageData(0,0,this._width,this._height);return this._colorize(n.data,this._grad),i.putImageData(n,0,0),this},_colorize:function(t,i){for(var a,s=3,e=t.length;e>s;s+=4)a=4*t[s],a&&(t[s-3]=i[a],t[s-2]=i[a+1],t[s-1]=i[a+2])}},window.simpleheat=t}(),/*\n (c) 2014, Vladimir Agafonkin\n Leaflet.heat, a tiny and fast heatmap plugin for Leaflet.\n https://github.com/Leaflet/Leaflet.heat\n*/\nL.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,i){this._latlngs=t,L.setOptions(this,i)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on(\"moveend\",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on(\"zoomanim\",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off(\"moveend\",this._reset,this),t.options.zoomAnimation&&t.off(\"zoomanim\",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create(\"canvas\",\"leaflet-heatmap-layer leaflet-layer\"),i=L.DomUtil.testProp([\"transformOrigin\",\"WebkitTransformOrigin\",\"msTransformOrigin\"]);t.style[i]=\"50% 50%\";var a=this._map.getSize();t.width=a.x,t.height=a.y;var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,\"leaflet-zoom-\"+(s?\"animated\":\"hide\")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var i=this._map.getSize();this._heat._width!==i.x&&(this._canvas.width=this._heat._width=i.x),this._heat._height!==i.y&&(this._canvas.height=this._heat._height=i.y),this._redraw()},_redraw:function(){var t,i,a,s,e,n,h,o,r,d=[],_=this._heat._r,l=this._map.getSize(),m=new L.Bounds(L.point([-_,-_]),l.add([_,_])),c=void 0===this.options.max?1:this.options.max,u=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,f=1/Math.pow(2,Math.max(0,Math.min(u-this._map.getZoom(),12))),g=_/2,p=[],v=this._map._getMapPanePos(),w=v.x%g,y=v.y%g;for(t=0,i=this._latlngs.length;i>t;t++)if(a=this._map.latLngToContainerPoint(this._latlngs[t]),m.contains(a)){e=Math.floor((a.x-w)/g)+2,n=Math.floor((a.y-y)/g)+2;var x=void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1;r=x*f,p[n]=p[n]||[],s=p[n][e],s?(s[0]=(s[0]*s[2]+a.x*r)/(s[2]+r),s[1]=(s[1]*s[2]+a.y*r)/(s[2]+r),s[2]+=r):p[n][e]=[a.x,a.y,r]}for(t=0,i=p.length;i>t;t++)if(p[t])for(h=0,o=p[t].length;o>h;h++)s=p[t][h],s&&d.push([Math.round(s[0]),Math.round(s[1]),Math.min(s[2],c)]);this._heat.data(d).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._getCenterOffset(t.center)._multiplyBy(-i).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,a,i):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(a)+\" scale(\"+i+\")\"}}),L.heatLayer=function(t,i){return new L.HeatLayer(t,i)};"],"names":["CircleMarker","createPathComponent","_ref","ctx","center","children","_c","options","_objectWithoutProperties","_excluded","marker","LeafletCircleMarker","createElementObject","extendContext","overlayContainer","layer","props","prevProps","setLatLng","radius","setRadius","Tooltip","createOverlayComponent","context","tooltip","LeafletTooltip","element","setOpen","position","useEffect","container","instance","onTooltipOpen","event","update","onTooltipClose","on","tooltipopen","tooltipclose","bindTooltip","off","_map","unbindTooltip","L","prototype","_initCanvas","originalInitCanvas","call","this","_canvas","getContext","willReadFrequently","_ctx","_clear","originalClear","e","clearRect","error","_redraw","originalRedraw","FitBounds","points","shouldFit","map","useMap","hasFittedRef","React","current","length","bounds","point","boundsGroup","fitBounds","padding","HeatmapLayer","_ref2","visible","heatLayerRef","mapReadyRef","getContainer","_loaded","onMapReady","removeLayer","setLatLngs","hasLayer","parentNode","style","display","width","height","updateLayer","setTimeout","ensureLayer","blur","maxZoom","minOpacity","gradient","layerError","console","warn","_container","latLngs","Array","isArray","requestAnimationFrame","mapContainer","_panes","overlayPane","paneParent","appendChild","offsetParent","addTo","addError","message","includes","paneError","timeoutId","clearTimeout","Default","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","_ref3","onDataLoaded","heatmapData","setHeatmapData","useState","markerData","setMarkerData","cityStats","setCityStats","loading","setLoading","showHeatmap","setShowHeatmap","showMarkers","setShowMarkers","hasInitialFit","setHasInitialFit","reportData","useCallback","arguments","undefined","stats","extra","totalCustomers","reduce","sum","item","Number","count","summary","_objectSpread","totalPoints","totalCities","topCity","city","fetchCustomerLocations","async","status","response","authFetch","concat","API_URL","ok","data","json","success","markers","sort","a","b","source","log","empty","errorData","catch","heatmapPoints","useMemo","_jsxs","className","_jsx","FaUsers","FaMap","type","checked","onChange","prev","MapContainer","zoom","borderRadius","scrollWheelZoom","preferCanvas","TileLayer","attribution","url","index","find","m","Math","abs","lat","lng","customerName","pathOptions","fillColor","color","fillOpacity","weight","permanent","direction","offset","slice","stat","backgroundColor","t","i","document","getElementById","_width","_height","_max","clear","defaultRadius","defaultGradient","_data","max","add","push","_circle","createElement","s","_r","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","arc","PI","closePath","fill","createLinearGradient","addColorStop","fillStyle","fillRect","_grad","getImageData","draw","globalAlpha","drawImage","n","_colorize","putImageData","window","simpleheat","HeatLayer","Layer","Class","extend","initialize","_latlngs","setOptions","redraw","addLatLng","_heat","_updateOptions","_frame","_animating","Util","requestAnimFrame","onAdd","_reset","zoomAnimation","Browser","any3d","_animateZoom","onRemove","getPanes","removeChild","addLayer","DomUtil","create","testProp","getSize","x","y","addClass","containerPointToLayerPoint","setPosition","h","o","r","d","_","l","Bounds","c","u","getMaxZoom","f","pow","min","getZoom","g","p","v","_getMapPanePos","w","latLngToContainerPoint","contains","floor","alt","round","getZoomScale","_getCenterOffset","_multiplyBy","subtract","setTransform","TRANSFORM","getTranslateString","heatLayer"],"sourceRoot":""}