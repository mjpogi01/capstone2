{"version":3,"file":"static/js/286.3776fc24.chunk.js","mappings":"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","sources":["../node_modules/react-leaflet/lib/CircleMarker.js","../node_modules/@react-leaflet/core/lib/circle.js","../node_modules/react-leaflet/lib/Tooltip.js","components/admin/BranchMap.js","../node_modules/leaflet.heat/dist/leaflet-heat.js"],"sourcesContent":["import { createElementObject, createPathComponent, extendContext, updateCircle } from '@react-leaflet/core';\nimport { CircleMarker as LeafletCircleMarker } from 'leaflet';\nexport const CircleMarker = createPathComponent(function createCircleMarker({ center , children: _c , ...options }, ctx) {\n    const marker = new LeafletCircleMarker(center, options);\n    return createElementObject(marker, extendContext(ctx, {\n        overlayContainer: marker\n    }));\n}, updateCircle);\n","export function updateCircle(layer, props, prevProps) {\n    if (props.center !== prevProps.center) {\n        layer.setLatLng(props.center);\n    }\n    if (props.radius != null && props.radius !== prevProps.radius) {\n        layer.setRadius(props.radius);\n    }\n}\n","import { createElementObject, createOverlayComponent } from '@react-leaflet/core';\nimport { Tooltip as LeafletTooltip } from 'leaflet';\nimport { useEffect } from 'react';\nexport const Tooltip = createOverlayComponent(function createTooltip(props, context) {\n    const tooltip = new LeafletTooltip(props, context.overlayContainer);\n    return createElementObject(tooltip, context);\n}, function useTooltipLifecycle(element, context, { position  }, setOpen) {\n    useEffect(function addTooltip() {\n        const container = context.overlayContainer;\n        if (container == null) {\n            return;\n        }\n        const { instance  } = element;\n        const onTooltipOpen = (event)=>{\n            if (event.tooltip === instance) {\n                if (position != null) {\n                    instance.setLatLng(position);\n                }\n                instance.update();\n                setOpen(true);\n            }\n        };\n        const onTooltipClose = (event)=>{\n            if (event.tooltip === instance) {\n                setOpen(false);\n            }\n        };\n        container.on({\n            tooltipopen: onTooltipOpen,\n            tooltipclose: onTooltipClose\n        });\n        container.bindTooltip(instance);\n        return function removeTooltip() {\n            container.off({\n                tooltipopen: onTooltipOpen,\n                tooltipclose: onTooltipClose\n            });\n            // @ts-ignore protected property\n            if (container._map != null) {\n                container.unbindTooltip();\n            }\n        };\n    }, [\n        element,\n        context,\n        setOpen,\n        position\n    ]);\n});\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { MapContainer, TileLayer, CircleMarker, useMap, Tooltip } from 'react-leaflet';\nimport { FaMap, FaUsers } from 'react-icons/fa';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './BranchMap.css';\nimport { API_URL } from '../../config/api';\nimport { authFetch } from '../../services/apiClient';\nimport 'leaflet.heat';\n\n// Ensure heat layer canvas uses willReadFrequently context for better performance with frequent readbacks\nif (L.HeatLayer && typeof L.HeatLayer.prototype._initCanvas === 'function') {\n  const originalInitCanvas = L.HeatLayer.prototype._initCanvas;\n  L.HeatLayer.prototype._initCanvas = function patchedInitCanvas() {\n    originalInitCanvas.call(this);\n    if (this._canvas && this._canvas.getContext) {\n      const ctx = this._canvas.getContext('2d', { willReadFrequently: true }) || this._canvas.getContext('2d');\n      if (ctx) {\n        this._ctx = ctx;\n      }\n    }\n  };\n}\n\n// Patch _clear method to handle undefined canvas context gracefully\nif (L.HeatLayer && typeof L.HeatLayer.prototype._clear === 'function') {\n  const originalClear = L.HeatLayer.prototype._clear;\n  L.HeatLayer.prototype._clear = function patchedClear() {\n    // Ensure canvas exists\n    if (!this._canvas) {\n      return;\n    }\n    \n    // Ensure context exists - try to get it if missing\n    if (!this._ctx) {\n      try {\n        const ctx = this._canvas.getContext('2d', { willReadFrequently: true }) || this._canvas.getContext('2d');\n        if (ctx) {\n          this._ctx = ctx;\n        } else {\n          return; // Can't clear if no context available\n        }\n      } catch (e) {\n        return; // Canvas might not be ready yet\n      }\n    }\n    \n    // Double-check context still exists before calling original\n    if (!this._ctx || typeof this._ctx.clearRect !== 'function') {\n      return;\n    }\n    \n    try {\n      originalClear.call(this);\n    } catch (error) {\n      // Silently fail - this is often a timing issue that resolves itself\n      // Don't log to avoid console spam\n    }\n  };\n}\n\n// Patch _redraw method to ensure canvas is initialized\nif (L.HeatLayer && typeof L.HeatLayer.prototype._redraw === 'function') {\n  const originalRedraw = L.HeatLayer.prototype._redraw;\n  L.HeatLayer.prototype._redraw = function patchedRedraw() {\n    // Ensure canvas exists\n    if (!this._canvas) {\n      return;\n    }\n    \n    // Ensure context exists - try to initialize if missing\n    if (!this._ctx) {\n      if (this._initCanvas) {\n        try {\n          this._initCanvas();\n        } catch (e) {\n          // Canvas might not be ready\n        }\n      }\n      \n      // Try to get context directly if still missing\n      if (!this._ctx) {\n        try {\n          const ctx = this._canvas.getContext('2d', { willReadFrequently: true }) || this._canvas.getContext('2d');\n          if (ctx) {\n            this._ctx = ctx;\n          } else {\n            return; // Can't redraw without context\n          }\n        } catch (e) {\n          return; // Canvas not ready\n        }\n      }\n    }\n    \n    // Double-check context has required methods\n    if (!this._ctx || typeof this._ctx.clearRect !== 'function') {\n      return;\n    }\n    \n    try {\n      originalRedraw.call(this);\n    } catch (error) {\n      // Silently fail - this is often a timing issue that resolves itself\n      // Don't log to avoid console spam\n    }\n  };\n}\n\n// Fix for default marker icons in React\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n});\n\n// Component to fit map bounds (only on initial load)\nfunction FitBounds({ points, shouldFit }) {\n  const map = useMap();\n  const hasFittedRef = React.useRef(false);\n  \n  useEffect(() => {\n    // Only fit bounds on initial load when shouldFit is true\n    if (shouldFit && !hasFittedRef.current && points && points.length > 0) {\n      const bounds = points.map(point => [point[0], point[1]]);\n      const boundsGroup = L.latLngBounds(bounds);\n      map.fitBounds(boundsGroup, { padding: [50, 50] });\n      hasFittedRef.current = true;\n    }\n  }, [map, points, shouldFit]);\n  \n  return null;\n}\n\nfunction HeatmapLayer({ points, visible }) {\n  const map = useMap();\n  const heatLayerRef = React.useRef(null);\n  const mapReadyRef = React.useRef(false);\n\n  useEffect(() => {\n    if (!map) {\n      return undefined;\n    }\n\n    // Wait for map to be fully initialized\n    const checkMapReady = () => {\n      if (map && map.getContainer() && map._loaded) {\n        mapReadyRef.current = true;\n      } else {\n        mapReadyRef.current = false;\n      }\n    };\n\n    // Check immediately\n    checkMapReady();\n\n    // Also listen for map load event\n    const onMapReady = () => {\n      mapReadyRef.current = true;\n    };\n    \n    map.on('load', onMapReady);\n    if (map._loaded) {\n      mapReadyRef.current = true;\n    }\n\n    const removeLayer = () => {\n      const layer = heatLayerRef.current;\n      if (!layer) {\n        return;\n      }\n      \n      // Clear the heatmap data first\n      try {\n        if (layer.setLatLngs) {\n          layer.setLatLngs([]);\n        }\n      } catch (e) {\n        // Ignore errors when clearing\n      }\n      \n      // Remove from map\n      if (map.hasLayer(layer)) {\n        try {\n        map.removeLayer(layer);\n        } catch (e) {\n          // Ignore errors when removing\n        }\n      }\n      \n      // Hide canvas element if it exists\n      try {\n        if (layer._canvas && layer._canvas.parentNode) {\n          layer._canvas.style.display = 'none';\n        }\n      } catch (e) {\n        // Ignore errors\n      }\n      \n      // Clear the canvas if it exists\n      try {\n        if (layer._canvas && layer._ctx && typeof layer._ctx.clearRect === 'function') {\n          const ctx = layer._ctx;\n          ctx.clearRect(0, 0, layer._canvas.width, layer._canvas.height);\n        }\n      } catch (e) {\n        // Ignore errors\n      }\n      \n      heatLayerRef.current = null;\n    };\n\n    const ensureLayer = () => {\n      if (!heatLayerRef.current) {\n        try {\n          const layer = L.heatLayer([], {\n            radius: 20,\n            blur: 28,\n            maxZoom: 11,\n            minOpacity: 0.35,\n            gradient: {\n              0.0: '#fee2e2',\n              0.45: '#fca5a5',\n              0.65: '#f87171',\n              0.85: '#ef4444',\n              1.0: '#b91c1c'\n            }\n          });\n          heatLayerRef.current = layer;\n        } catch (layerError) {\n          console.warn('Error creating heat layer:', layerError);\n          return null;\n        }\n      }\n      return heatLayerRef.current;\n    };\n\n    const updateLayer = () => {\n      if (!visible) {\n        removeLayer();\n        return;\n      }\n      \n      // Wait for map to be ready\n      if (!mapReadyRef.current) {\n        // Retry after a short delay if map isn't ready\n        setTimeout(updateLayer, 100);\n        return;\n      }\n      \n      const layer = ensureLayer();\n      if (!layer) {\n        return;\n      }\n      \n      // Ensure map is ready before adding layer\n      if (!map || !map.getContainer()) {\n        return;\n      }\n      \n      // Ensure map is fully loaded\n      if (!map._loaded && !map._container) {\n        // Map not loaded yet, retry later\n        setTimeout(updateLayer, 100);\n        return;\n      }\n      \n      const latLngs = Array.isArray(points) && points.length > 0 ? points : [];\n      \n      // Use requestAnimationFrame to ensure canvas is ready\n      requestAnimationFrame(() => {\n        try {\n          // Ensure map container exists and is ready\n          const mapContainer = map?.getContainer();\n          if (!mapContainer || !mapContainer.parentNode) {\n            // Map container not ready, retry later\n            setTimeout(updateLayer, 100);\n            return;\n          }\n          \n          // Double-check canvas context exists before updating\n          if (layer._canvas && (!layer._ctx || !layer._canvas.getContext)) {\n            // Reinitialize canvas if needed\n            if (layer._initCanvas) {\n              layer._initCanvas();\n            }\n          }\n          \n          // Make sure canvas is visible when showing\n          if (layer._canvas) {\n            layer._canvas.style.display = '';\n          }\n          \n          // Only update lat/lngs if layer is already on map, otherwise wait\n          if (map.hasLayer(layer)) {\n            layer.setLatLngs(latLngs);\n          } else {\n            // Layer not on map yet - ensure map is fully ready before adding\n            if (map._panes && map._panes.overlayPane && map._panes.overlayPane.parentNode) {\n              // Double-check that the overlay pane is in the DOM\n              try {\n                // Verify the pane has a parent (is in DOM) and the map container is visible\n                const paneParent = map._panes.overlayPane.parentNode;\n                const mapContainer = map.getContainer();\n                \n                if (paneParent && paneParent.appendChild && mapContainer && mapContainer.offsetParent !== null) {\n                  // Map is visible and ready - try to add layer\n                  try {\n                    layer.setLatLngs(latLngs);\n                    layer.addTo(map);\n                  } catch (addError) {\n                    // If addTo fails, retry after delay\n                    if (addError.message && addError.message.includes('appendChild')) {\n                      setTimeout(updateLayer, 200);\n                    } else {\n                      throw addError;\n                    }\n                  }\n                } else {\n                  // Map not visible or pane not attached, retry\n                  setTimeout(updateLayer, 100);\n                }\n              } catch (paneError) {\n                // Pane check failed, retry\n                setTimeout(updateLayer, 100);\n              }\n            } else {\n              // Map panes not ready, retry later\n              setTimeout(updateLayer, 100);\n            }\n          }\n        } catch (error) {\n          // Silently handle errors - often timing issues that resolve themselves\n          // Only retry if it's a critical error\n          if (error.message && error.message.includes('appendChild')) {\n            // Retry after a short delay\n            setTimeout(updateLayer, 200);\n          }\n        }\n      });\n    };\n\n    // Delay initial update to ensure map is ready\n    const timeoutId = setTimeout(() => {\n      updateLayer();\n    }, 100);\n\n    return () => {\n      clearTimeout(timeoutId);\n      removeLayer();\n      if (map) {\n        map.off('load', onMapReady);\n      }\n    };\n  }, [map, points, visible]);\n\n  return null;\n}\n\nconst BranchMap = ({ onDataLoaded }) => {\n  const [heatmapData, setHeatmapData] = useState([]);\n  const [markerData, setMarkerData] = useState([]);\n  const [cityStats, setCityStats] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showHeatmap, setShowHeatmap] = useState(true);\n  const [showMarkers, setShowMarkers] = useState(true);\n  const [hasInitialFit, setHasInitialFit] = useState(false);\n\n  const reportData = useCallback((points = [], stats = [], extra = {}) => {\n    if (typeof onDataLoaded === 'function') {\n      const totalCustomers = Array.isArray(stats)\n        ? stats.reduce((sum, item) => sum + (Number(item.count) || 0), 0)\n        : 0;\n      onDataLoaded({\n        points,\n        cityStats: stats,\n        summary: {\n          totalPoints: Array.isArray(points) ? points.length : 0,\n          totalCities: Array.isArray(stats) ? stats.length : 0,\n          totalCustomers,\n          topCity: Array.isArray(stats) && stats.length ? stats[0].city : null,\n          ...extra\n        }\n      });\n    }\n  }, [onDataLoaded]);\n\n  useEffect(() => {\n    fetchCustomerLocations();\n    \n    // Auto-refresh disabled - customer locations will only load once when component mounts\n    // If you want to re-enable auto-refresh, uncomment the code below:\n    // const refreshInterval = setInterval(() => {\n    //   fetchCustomerLocations();\n    // }, 30000); // 30 seconds\n    // \n    // return () => {\n    //   clearInterval(refreshInterval);\n    // };\n  }, []);\n\n  const fetchCustomerLocations = async () => {\n    try {\n      setLoading(true);\n      reportData([], [], { status: 'loading' });\n      const response = await authFetch(`${API_URL}/api/analytics/customer-locations`);\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (data.success && data.data) {\n          const points = Array.isArray(data.data) ? data.data : [];\n          const markers = Array.isArray(data.markers) ? data.markers : [];\n          const statsRaw = Array.isArray(data.cityStats) ? data.cityStats : [];\n          const stats = [...statsRaw].sort((a, b) => (Number(b.count) || 0) - (Number(a.count) || 0));\n          setHeatmapData(points);\n          setCityStats(stats);\n          setMarkerData(markers); // Store marker data with customer names\n          reportData(points, stats, { status: 'loaded', source: 'api' });\n          console.log(`✅ Loaded ${points.length} customer location points from database`);\n          \n          // Mark initial fit after first successful load\n          if (!hasInitialFit && points.length > 0) {\n            setHasInitialFit(true);\n          }\n        } else {\n          // No data available - show empty state\n          setHeatmapData([]);\n          setCityStats([]);\n          reportData([], [], { status: 'loaded', source: 'api', empty: true });\n          console.log('ℹ️ No customer location data available');\n        }\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('❌ API error fetching customer locations:', errorData);\n        setHeatmapData([]);\n        setCityStats([]);\n        reportData([], [], { status: 'error', source: 'api', error: errorData.error || 'Failed to fetch customer locations' });\n      }\n    } catch (error) {\n      console.error('❌ Error fetching customer locations:', error);\n      setHeatmapData([]);\n      setCityStats([]);\n      reportData([], [], { status: 'error', source: 'api', error: error.message || 'Network error' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const heatmapPoints = useMemo(() => {\n    if (!heatmapData || heatmapData.length === 0) {\n      return [];\n    }\n\n    return heatmapData.map(point => [\n      point[0],\n      point[1],\n      typeof point[2] === 'number' ? point[2] : 1\n    ]);\n  }, [heatmapData]);\n\n  if (loading) {\n    return (\n      <div className=\"branch-map-loading\">\n        <div className=\"loading-spinner\"></div>\n        <p>Loading map...</p>\n      </div>\n    );\n  }\n\n  // Show empty state if no data\n  if (!loading && heatmapData.length === 0 && cityStats.length === 0) {\n    return (\n      <div className=\"branch-map-container\">\n        <div className=\"branch-map-header\">\n          <div>\n            <h3>\n              <FaUsers className=\"header-icon\" />\n              Customer Locations\n            </h3>\n            <p>No customer location data available</p>\n          </div>\n        </div>\n        <div className=\"branch-map-empty-state\">\n          <FaMap className=\"empty-icon\" />\n          <p>No customer locations found in the database.</p>\n          <p className=\"empty-subtitle\">Customer locations will appear here once customers add addresses or place orders.</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Calculate map center (centered on Batangas region)\n  const mapCenter = [13.7563, 121.0583]; // Batangas City coordinates\n  const mapZoom = 9;\n\n  return (\n    <div className=\"branch-map-container\">\n      <div className=\"branch-map-header\">\n        <div>\n          <h3>\n            <FaUsers className=\"header-icon\" />\n            Customer Locations\n          </h3>\n          <p>Visualize customer density with heatmap and red dot markers</p>\n        </div>\n        <div className=\"branch-map-controls\">\n          <label className=\"map-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={showHeatmap}\n              onChange={() => setShowHeatmap(prev => !prev)}\n            />\n            <span className=\"toggle-slider\"></span>\n            <span className=\"toggle-label\">\n              <span className=\"toggle-text\">Heatmap</span>\n            </span>\n          </label>\n          <label className=\"map-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={showMarkers}\n              onChange={() => setShowMarkers(prev => !prev)}\n            />\n            <span className=\"toggle-slider\"></span>\n            <span className=\"toggle-label\">\n              <span className=\"toggle-text\">Red Dots</span>\n            </span>\n          </label>\n        </div>\n      </div>\n      \n      <div className=\"branch-map-wrapper\">\n        <MapContainer\n          center={mapCenter}\n          zoom={mapZoom}\n          style={{ height: '600px', width: '100%', borderRadius: '12px' }}\n          scrollWheelZoom={true}\n          preferCanvas={true}\n        >\n          <TileLayer\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          \n          <FitBounds points={heatmapData} shouldFit={!hasInitialFit && heatmapData.length > 0} />\n          <HeatmapLayer points={heatmapPoints} visible={showHeatmap} />\n          \n          {/* Render red dots for each customer location */}\n          {showMarkers &&\n            heatmapData.map((point, index) => {\n              // Get customer name from marker data if available\n              const marker = markerData[index] || markerData.find(m => \n                m && typeof m === 'object' && \n                Math.abs(m.lat - point[0]) < 0.0001 && \n                Math.abs(m.lng - point[1]) < 0.0001\n              );\n              const customerName = marker && typeof marker === 'object' ? marker.customerName : null;\n              \n              return (\n              <CircleMarker\n                key={index}\n                center={[point[0], point[1]]}\n                radius={4}\n                pathOptions={{\n                  fillColor: '#ef4444',\n                  color: '#dc2626',\n                  fillOpacity: 0.8,\n                  weight: 1\n                }}\n                >\n                  {customerName && (\n                    <Tooltip permanent={false} direction=\"top\" offset={[0, -10]}>\n                      {customerName}\n                    </Tooltip>\n                  )}\n                </CircleMarker>\n              );\n            })}\n          \n        </MapContainer>\n      </div>\n      \n      {/* Customer Statistics */}\n      <div className=\"branch-map-legend\">\n        <h4>Top Customer Cities</h4>\n        <div className=\"legend-items\">\n          {cityStats.slice(0, 10).map((stat, index) => (\n            <div key={index} className=\"legend-item\">\n              <div className=\"legend-marker\" style={{\n                backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6'][index % 5]\n              }}></div>\n              <span className=\"legend-city\">{stat.city}</span>\n              <span className=\"legend-count\">({Number(stat.count || 0).toLocaleString()} customers)</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BranchMap;\n","/*\n (c) 2014, Vladimir Agafonkin\n simpleheat, a tiny JavaScript library for drawing heatmaps with Canvas\n https://github.com/mourner/simpleheat\n*/\n!function(){\"use strict\";function t(i){return this instanceof t?(this._canvas=i=\"string\"==typeof i?document.getElementById(i):i,this._ctx=i.getContext(\"2d\"),this._width=i.width,this._height=i.height,this._max=1,void this.clear()):new t(i)}t.prototype={defaultRadius:25,defaultGradient:{.4:\"blue\",.6:\"cyan\",.7:\"lime\",.8:\"yellow\",1:\"red\"},data:function(t,i){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,i){i=i||15;var a=this._circle=document.createElement(\"canvas\"),s=a.getContext(\"2d\"),e=this._r=t+i;return a.width=a.height=2*e,s.shadowOffsetX=s.shadowOffsetY=200,s.shadowBlur=i,s.shadowColor=\"black\",s.beginPath(),s.arc(e-200,e-200,t,0,2*Math.PI,!0),s.closePath(),s.fill(),this},gradient:function(t){var i=document.createElement(\"canvas\"),a=i.getContext(\"2d\"),s=a.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var e in t)s.addColorStop(e,t[e]);return a.fillStyle=s,a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var i=this._ctx;i.clearRect(0,0,this._width,this._height);for(var a,s=0,e=this._data.length;e>s;s++)a=this._data[s],i.globalAlpha=Math.max(a[2]/this._max,t||.05),i.drawImage(this._circle,a[0]-this._r,a[1]-this._r);var n=i.getImageData(0,0,this._width,this._height);return this._colorize(n.data,this._grad),i.putImageData(n,0,0),this},_colorize:function(t,i){for(var a,s=3,e=t.length;e>s;s+=4)a=4*t[s],a&&(t[s-3]=i[a],t[s-2]=i[a+1],t[s-1]=i[a+2])}},window.simpleheat=t}(),/*\n (c) 2014, Vladimir Agafonkin\n Leaflet.heat, a tiny and fast heatmap plugin for Leaflet.\n https://github.com/Leaflet/Leaflet.heat\n*/\nL.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,i){this._latlngs=t,L.setOptions(this,i)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on(\"moveend\",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on(\"zoomanim\",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off(\"moveend\",this._reset,this),t.options.zoomAnimation&&t.off(\"zoomanim\",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create(\"canvas\",\"leaflet-heatmap-layer leaflet-layer\"),i=L.DomUtil.testProp([\"transformOrigin\",\"WebkitTransformOrigin\",\"msTransformOrigin\"]);t.style[i]=\"50% 50%\";var a=this._map.getSize();t.width=a.x,t.height=a.y;var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,\"leaflet-zoom-\"+(s?\"animated\":\"hide\")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var i=this._map.getSize();this._heat._width!==i.x&&(this._canvas.width=this._heat._width=i.x),this._heat._height!==i.y&&(this._canvas.height=this._heat._height=i.y),this._redraw()},_redraw:function(){var t,i,a,s,e,n,h,o,r,d=[],_=this._heat._r,l=this._map.getSize(),m=new L.Bounds(L.point([-_,-_]),l.add([_,_])),c=void 0===this.options.max?1:this.options.max,u=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,f=1/Math.pow(2,Math.max(0,Math.min(u-this._map.getZoom(),12))),g=_/2,p=[],v=this._map._getMapPanePos(),w=v.x%g,y=v.y%g;for(t=0,i=this._latlngs.length;i>t;t++)if(a=this._map.latLngToContainerPoint(this._latlngs[t]),m.contains(a)){e=Math.floor((a.x-w)/g)+2,n=Math.floor((a.y-y)/g)+2;var x=void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1;r=x*f,p[n]=p[n]||[],s=p[n][e],s?(s[0]=(s[0]*s[2]+a.x*r)/(s[2]+r),s[1]=(s[1]*s[2]+a.y*r)/(s[2]+r),s[2]+=r):p[n][e]=[a.x,a.y,r]}for(t=0,i=p.length;i>t;t++)if(p[t])for(h=0,o=p[t].length;o>h;h++)s=p[t][h],s&&d.push([Math.round(s[0]),Math.round(s[1]),Math.min(s[2],c)]);this._heat.data(d).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._getCenterOffset(t.center)._multiplyBy(-i).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,a,i):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(a)+\" scale(\"+i+\")\"}}),L.heatLayer=function(t,i){return new L.HeatLayer(t,i)};"],"names":["CircleMarker","createPathComponent","_ref","ctx","center","children","_c","options","_objectWithoutProperties","_excluded","marker","LeafletCircleMarker","createElementObject","extendContext","overlayContainer","layer","props","prevProps","setLatLng","radius","setRadius","Tooltip","createOverlayComponent","context","tooltip","LeafletTooltip","element","setOpen","position","useEffect","container","instance","onTooltipOpen","event","update","onTooltipClose","on","tooltipopen","tooltipclose","bindTooltip","off","_map","unbindTooltip","L","prototype","_initCanvas","originalInitCanvas","call","this","_canvas","getContext","willReadFrequently","_ctx","_clear","originalClear","e","clearRect","error","_redraw","originalRedraw","FitBounds","points","shouldFit","map","useMap","hasFittedRef","React","current","length","bounds","point","boundsGroup","fitBounds","padding","HeatmapLayer","_ref2","visible","heatLayerRef","mapReadyRef","getContainer","_loaded","onMapReady","removeLayer","setLatLngs","hasLayer","parentNode","style","display","width","height","updateLayer","setTimeout","ensureLayer","blur","maxZoom","minOpacity","gradient","layerError","console","warn","_container","latLngs","Array","isArray","requestAnimationFrame","mapContainer","_panes","overlayPane","paneParent","appendChild","offsetParent","addTo","addError","message","includes","paneError","timeoutId","clearTimeout","Default","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","_ref3","onDataLoaded","heatmapData","setHeatmapData","useState","markerData","setMarkerData","cityStats","setCityStats","loading","setLoading","showHeatmap","setShowHeatmap","showMarkers","setShowMarkers","hasInitialFit","setHasInitialFit","reportData","useCallback","arguments","undefined","stats","extra","totalCustomers","reduce","sum","item","Number","count","summary","_objectSpread","totalPoints","totalCities","topCity","city","fetchCustomerLocations","async","status","response","authFetch","concat","API_URL","ok","data","json","success","markers","sort","a","b","source","log","empty","errorData","catch","heatmapPoints","useMemo","_jsxs","className","_jsx","FaUsers","FaMap","type","checked","onChange","prev","MapContainer","zoom","borderRadius","scrollWheelZoom","preferCanvas","TileLayer","attribution","url","index","find","m","Math","abs","lat","lng","customerName","pathOptions","fillColor","color","fillOpacity","weight","permanent","direction","offset","slice","stat","backgroundColor","toLocaleString","t","i","document","getElementById","_width","_height","_max","clear","defaultRadius","defaultGradient","_data","max","add","push","_circle","createElement","s","_r","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","arc","PI","closePath","fill","createLinearGradient","addColorStop","fillStyle","fillRect","_grad","getImageData","draw","globalAlpha","drawImage","n","_colorize","putImageData","window","simpleheat","HeatLayer","Layer","Class","extend","initialize","_latlngs","setOptions","redraw","addLatLng","_heat","_updateOptions","_frame","_animating","Util","requestAnimFrame","onAdd","_reset","zoomAnimation","Browser","any3d","_animateZoom","onRemove","getPanes","removeChild","addLayer","DomUtil","create","testProp","getSize","x","y","addClass","containerPointToLayerPoint","setPosition","h","o","r","d","_","l","Bounds","c","u","getMaxZoom","f","pow","min","getZoom","g","p","v","_getMapPanePos","w","latLngToContainerPoint","contains","floor","alt","round","getZoomScale","_getCenterOffset","_multiplyBy","subtract","setTransform","TRANSFORM","getTranslateString","heatLayer"],"sourceRoot":""}